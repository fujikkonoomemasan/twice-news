<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TWICE WORLD</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Zen+Kaku+Gothic+New:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --apricot: #FCC89B;
            --magenta: #FF5FA2;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --text-main: #2d2d2d;
            --text-sub: #777;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Zen Kaku Gothic New', sans-serif;
            background: linear-gradient(160deg, #fff0f5 0%, #fff 40%, #fff0eb 100%);
            color: var(--text-main);
            min-height: 100vh;
            padding-bottom: 100px; /* „Éä„Éì„ÅÆÂàÜ */
            -webkit-tap-highlight-color: transparent;
        }

        /* ËÉåÊôØË£ÖÈ£æ */
        body::before {
            content: ''; position: fixed; top: -20%; left: -20%; width: 80%; height: 60%;
            background: radial-gradient(circle, rgba(255,95,162,0.2) 0%, rgba(255,255,255,0) 70%);
            filter: blur(60px); z-index: -1; animation: float 20s infinite ease-in-out;
        }

        @keyframes float { 0%,100% { transform: translate(0,0); } 50% { transform: translate(20px,40px); } }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .app-header {
            padding: 20px 24px 10px;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 50;
            background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);
        }
        .app-header h1 {
            font-size: 1.5rem; font-weight: 800; margin: 0;
            background: linear-gradient(90deg, var(--magenta), var(--apricot));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢Âàá„ÇäÊõø„ÅàÁî® */
        .view-section { display: none; padding: 15px 20px; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HOME (NEWS) Styles --- */
        .widget-box {
            background: linear-gradient(135deg, var(--magenta), #ff8fab);
            border-radius: 20px; padding: 20px; color: white;
            box-shadow: 0 10px 30px rgba(255, 95, 162, 0.25);
            margin-bottom: 25px; position: relative; overflow: hidden;
        }
        .widget-box::after {
            content: 'üç≠'; position: absolute; right: -10px; bottom: -20px;
            font-size: 6rem; opacity: 0.2; transform: rotate(-20deg);
        }
        .days-count { font-size: 2.2rem; font-weight: 800; }

        .news-card {
            background: var(--glass-bg); backdrop-filter: blur(10px);
            border-radius: 16px; padding: 16px; margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.6);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-decoration: none; color: inherit; display: block;
        }
        .news-tag {
            font-size: 0.7rem; font-weight: 700; padding: 3px 8px; border-radius: 6px;
            margin-right: 8px; text-transform: uppercase;
        }
        .tag-official { background: rgba(255,95,162,0.1); color: var(--magenta); }
        .tag-media { background: rgba(0,0,0,0.05); color: #555; }

        /* --- MOVIE Styles --- */
        .video-card {
            margin-bottom: 25px; border-radius: 16px; overflow: hidden;
            background: white; box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .video-wrapper {
            position: relative; padding-bottom: 56.25%; height: 0;
        }
        .video-wrapper iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
        .video-info { padding: 12px 15px; }
        .video-title { font-weight: 700; font-size: 0.95rem; margin: 0; }
        .video-meta { font-size: 0.8rem; color: #888; margin-top: 5px; }

        /* --- SCHEDULE Styles --- */
        .timeline { position: relative; padding-left: 20px; border-left: 2px solid #ddd; margin-left: 10px; }
        .timeline-item { position: relative; margin-bottom: 30px; padding-left: 20px; }
        .timeline-item::before {
            content: ''; position: absolute; left: -26px; top: 5px;
            width: 10px; height: 10px; background: var(--magenta);
            border: 2px solid white; border-radius: 50%; box-shadow: 0 0 0 3px rgba(255,95,162,0.2);
        }
        .schedule-date { font-weight: 800; color: var(--magenta); font-size: 0.9rem; }
        .schedule-title { font-weight: 700; margin: 5px 0; font-size: 1rem; }
        .schedule-desc { font-size: 0.85rem; color: #666; }
        .is-past { opacity: 0.5; } /* ÈÅéÂéª„ÅÆ„Ç§„Éô„É≥„Éà */

        /* „Éú„Éà„É†„Éä„Éì */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(20px);
            padding: 10px 0 25px; display: flex; justify-content: space-around;
            border-top: 1px solid rgba(0,0,0,0.05); z-index: 100;
        }
        .nav-btn {
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            color: #aaa; font-size: 1.2rem; cursor: pointer; width: 60px; transition: 0.2s;
        }
        .nav-btn.active { color: var(--magenta); transform: translateY(-3px); }
        .nav-label { font-size: 0.6rem; font-weight: 600; }

    </style>
</head>
<body>

    <header class="app-header">
        <h1>TWICE WORLD</h1>
        <i class="fa-solid fa-gear" style="color:#ccc;"></i>
    </header>

    <div id="view-home" class="view-section active">
        <div class="widget-box">
            <div style="font-size:0.8rem; opacity:0.9;">DAYS WITH TWICE</div>
            <div class="days-count" id="debut-days">0000</div>
            <div style="font-size:0.8rem; margin-top:5px;">SINCE 2015.10.20</div>
        </div>

        <h3 style="margin-left:5px;">Latest News</h3>
        <div id="news-list">
            <div style="text-align:center; padding:20px;">
                <i class="fa-solid fa-circle-notch fa-spin" style="color:var(--magenta);"></i> Loading...
            </div>
        </div>
    </div>

    <div id="view-movie" class="view-section">
        <h3 style="margin-left:5px; margin-bottom:15px;">Music Videos</h3>
        <div id="video-list"></div>
    </div>

    <div id="view-schedule" class="view-section">
        <h3 style="margin-left:5px; margin-bottom:15px;">Schedule</h3>
        <div class="timeline" id="schedule-list">
            </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-btn active" onclick="switchTab('home', this)">
            <i class="fa-solid fa-newspaper"></i><span class="nav-label">Home</span>
        </div>
        <div class="nav-btn" onclick="switchTab('movie', this)">
            <i class="fa-solid fa-play-circle"></i><span class="nav-label">Movie</span>
        </div>
        <div class="nav-btn" onclick="switchTab('schedule', this)">
            <i class="fa-solid fa-calendar-day"></i><span class="nav-label">Schedule</span>
        </div>
        <div class="nav-btn" onclick="window.open('https://www.twicejapan.com/','_blank')">
            <i class="fa-solid fa-globe"></i><span class="nav-label">Official</span>
        </div>
    </nav>

    <script>
        // --- 1. Ë®≠ÂÆö„Éá„Éº„Çø („Åì„Åì„ÇíÂ§â„Åà„Çå„Å∞ÊâãÂãï„ÅßÊõ¥Êñ∞ÂèØËÉΩ) ---
        
        // ‚òÖ MV„É™„Çπ„Éà (YouTube ID„ÇíÂÖ•„Çå„Çã)
        const mvData = [
            { id: "eL64n91W_eE", title: "Strategy (feat. Megan Thee Stallion)", date: "2024.12" },
            { id: "M0c04L2d6Q8", title: "ONE SPARK", date: "2024.02" },
            { id: "b2f6J5t6n_4", title: "DIVE", date: "2024.07" },
            { id: "722x24qg91E", title: "Hare Hare", date: "2023.05" },
            { id: "c7rCyll5AeY", title: "The Feels", date: "2021.10" }
        ];

        // ‚òÖ „Çπ„Ç±„Ç∏„É•„Éº„É´„É™„Çπ„Éà (Êú™Êù•„ÅÆÊó•‰ªò„ÇíÂÖ•„Çå„Çã)
        const scheduleData = [
            { date: "2025-07-16", title: "MISAMO JAPAN DOME TOUR 2024", desc: "Blu-ray Release" },
            { date: "2025-10-20", title: "10th Anniversary", desc: "Special Live & Event (‰∫àÊÉ≥)" },
            { date: "2026-01-01", title: "New Year Greeting", desc: "Official YouTube" }
        ];

        // --- 2. Ê©üËÉΩ„ÅÆÂÆüË£Ö ---

        // „Çø„ÉñÂàá„ÇäÊõø„ÅàÊ©üËÉΩ
        function switchTab(tabName, navEl) {
            // „Çø„Éñ„ÅÆË¶ã„ÅüÁõÆ
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            if(navEl) navEl.classList.add('active');

            // ÁîªÈù¢„ÅÆÂàá„ÇäÊõø„Åà
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + tabName).classList.add('active');

            // „Éö„Éº„Ç∏„Éà„ÉÉ„Éó„Å∏
            window.scrollTo({top:0, behavior:'smooth'});
        }

        // „Éá„Éì„É•„ÉºÊó•Ë®àÁÆó
        const debutDate = new Date('2015-10-20');
        const diffDays = Math.ceil(Math.abs(new Date() - debutDate) / (1000 * 60 * 60 * 24)); 
        document.getElementById('debut-days').innerText = diffDays;

        // MV„ÅÆË°®Á§∫
        const videoContainer = document.getElementById('video-list');
        mvData.forEach(mv => {
            const vHtml = `
                <div class="video-card">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/${mv.id}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <div class="video-info">
                        <h4 class="video-title">${mv.title}</h4>
                        <div class="video-meta">${mv.date} Release</div>
                    </div>
                </div>`;
            videoContainer.innerHTML += vHtml;
        });

        // „Çπ„Ç±„Ç∏„É•„Éº„É´„ÅÆË°®Á§∫
        const scheduleContainer = document.getElementById('schedule-list');
        const today = new Date().toISOString().split('T')[0];

        scheduleData.forEach(sch => {
            const isPast = sch.date < today;
            const pastClass = isPast ? 'is-past' : '';
            const html = `
                <div class="timeline-item ${pastClass}">
                    <div class="schedule-date">${sch.date.replace(/-/g, '.')}</div>
                    <div class="schedule-title">${sch.title}</div>
                    <div class="schedule-desc">${sch.desc}</div>
                </div>`;
            scheduleContainer.innerHTML += html;
        });

        // „Éã„É•„Éº„Çπ„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø (JSON)
        fetch('news_data.json')
            .then(res => res.json())
            .then(data => {
                const list = document.getElementById('news-list');
                list.innerHTML = ''; // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ê∂àÂéª
                
                // Êó•‰ªòÈ†Ü„ÇΩ„Éº„Éà
                data.sort((a, b) => new Date(b.date) - new Date(a.date));

                data.forEach(news => {
                    const isOfficial = news.source === 'Official';
                    const tagClass = isOfficial ? 'tag-official' : 'tag-media';
                    const icon = isOfficial ? '<i class="fa-solid fa-check-circle"></i> OFFICIAL' : '<i class="fa-solid fa-bolt"></i> MEDIA';
                    
                    const item = `
                        <a href="${news.link}" target="_blank" class="news-card">
                            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                                <span class="news-tag ${tagClass}">${icon}</span>
                                <span style="font-size:0.75rem; color:#999;">${news.date.substring(5,16)}</span>
                            </div>
                            <div style="font-size:1rem; font-weight:700; line-height:1.4;">${news.title}</div>
                            <div style="font-size:0.85rem; color:#666; margin-top:5px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;">
                                ${news.summary}
                            </div>
                        </a>`;
                    list.innerHTML += item;
                });
            })
            .catch(err => {
                document.getElementById('news-list').innerHTML = `<p style="text-align:center; color:#999;">News Load Failed...</p>`;
            });

    </script>
</body>
</html>
