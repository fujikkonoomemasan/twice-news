<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TWICE WORLD</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Zen+Kaku+Gothic+New:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --apricot: #FCC89B;
            --magenta: #FF5FA2;
            --deep-purple: #4a1e45;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.5);
            --shadow-sm: 0 4px 15px rgba(255, 95, 162, 0.15);
            --shadow-lg: 0 10px 40px rgba(255, 95, 162, 0.25);
            --text-main: #2d2d2d;
            --text-sub: #777;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Zen Kaku Gothic New', sans-serif;
            background: linear-gradient(160deg, #fff0f5 0%, #fff 40%, #fff0eb 100%);
            color: var(--text-main);
            min-height: 100vh;
            padding-bottom: 140px; /* „Éó„É¨„Ç§„É§„Éº„Å®„Éä„Éì„ÅÆÂàÜ */
            -webkit-tap-highlight-color: transparent;
        }

        /* ËÉåÊôØ„ÅÆË£ÖÈ£æÔºà„Ç™„Éº„É≠„É©Ôºâ */
        body::before {
            content: '';
            position: fixed;
            top: -20%;
            left: -20%;
            width: 80%;
            height: 60%;
            background: radial-gradient(circle, rgba(255,95,162,0.2) 0%, rgba(255,255,255,0) 70%);
            filter: blur(60px);
            z-index: -1;
            animation: float 20s infinite ease-in-out;
        }
        body::after {
            content: '';
            position: fixed;
            bottom: -10%;
            right: -10%;
            width: 70%;
            height: 50%;
            background: radial-gradient(circle, rgba(252,200,155,0.3) 0%, rgba(255,255,255,0) 70%);
            filter: blur(50px);
            z-index: -1;
            animation: float 15s infinite reverse ease-in-out;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            50% { transform: translate(20px, 40px); }
            100% { transform: translate(0, 0); }
        }

        /* „Éò„ÉÉ„ÉÄ„Éº„Ç®„É™„Ç¢ */
        .app-header {
            padding: 20px 24px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .user-greeting h1 {
            font-size: 1.6rem;
            font-weight: 800;
            margin: 0;
            background: linear-gradient(90deg, var(--magenta), var(--apricot));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .user-greeting p {
            margin: 0;
            font-size: 0.85rem;
            color: var(--text-sub);
            font-weight: 600;
        }

        .header-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-sm);
            color: var(--magenta);
            font-size: 1.1rem;
        }

        /* „Éá„Éì„É•„ÉºÊó•„Ç´„Ç¶„É≥„Çø„Éº„Ç¶„Ç£„Ç∏„Çß„ÉÉ„Éà */
        .widget-area {
            padding: 15px 20px;
        }
        
        .main-widget {
            background: linear-gradient(135deg, var(--magenta), #ff8fab);
            border-radius: 24px;
            padding: 20px;
            color: white;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .main-widget::after {
            content: 'üç≠';
            position: absolute;
            right: -10px;
            bottom: -20px;
            font-size: 8rem;
            opacity: 0.2;
            transform: rotate(-20deg);
        }

        .widget-label {
            font-size: 0.8rem;
            opacity: 0.9;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .counter-box {
            display: flex;
            align-items: baseline;
            margin-top: 5px;
        }

        .days-count {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
        }

        .days-label {
            font-size: 1rem;
            margin-left: 5px;
            font-weight: 600;
        }

        /* „Çø„ÉñÂàá„ÇäÊõø„Åà */
        .tab-menu {
            display: flex;
            gap: 15px;
            padding: 10px 24px;
            overflow-x: auto;
            scrollbar-width: none; /* Firefox */
        }
        .tab-menu::-webkit-scrollbar { display: none; }

        .tab-item {
            padding: 10px 20px;
            background: white;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-sub);
            white-space: nowrap;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid rgba(0,0,0,0.05);
            cursor: pointer;
        }

        .tab-item.active {
            background: var(--text-main);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* „Éã„É•„Éº„Çπ„É™„Çπ„Éà */
        #news-container {
            padding: 10px 20px;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 800;
            margin: 10px 5px 15px;
            color: var(--text-main);
        }

        /* „É™„ÉÉ„ÉÅ„Å™„Éã„É•„Éº„Çπ„Ç´„Éº„Éâ */
        .news-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 16px;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .news-card:active {
            transform: scale(0.98);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .source-pill {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 8px;
            text-transform: uppercase;
        }
        
        .source-official { background: rgba(255, 95, 162, 0.1); color: var(--magenta); }
        .source-news { background: rgba(100, 100, 100, 0.1); color: #555; }

        .news-date {
            font-size: 0.75rem;
            color: #999;
            font-weight: 600;
        }

        .news-title {
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.5;
            margin: 0;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-link {
            text-decoration: none;
            color: inherit;
        }

        /* „Éó„É¨„Ç§„É§„ÉºÈ¢®UIÔºàË£ÖÈ£æÔºâ */
        .mini-player {
            position: fixed;
            bottom: 85px; /* „Éä„Éì„ÅÆ‰∏ä */
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            background: rgba(40, 40, 40, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 90;
        }

        .track-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .album-art {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, var(--apricot), var(--magenta));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .track-text h4 {
            margin: 0;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .track-text p {
            margin: 0;
            font-size: 0.7rem;
            opacity: 0.7;
        }

        .player-controls {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        /* „Éú„Éà„É†„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 10px 0 25px; /* iPhone„ÅÆ‰∏ãÈÉ®„Éê„ÉºËÄÉÊÖÆ */
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(0,0,0,0.05);
            z-index: 100;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #aaa;
            font-size: 1.2rem;
            cursor: pointer;
            width: 60px;
        }

        .nav-btn.active {
            color: var(--magenta);
        }

        .nav-label {
            font-size: 0.6rem;
            font-weight: 600;
        }

        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Ç±„É´„Éà„É≥ */
        .skeleton {
            background: #eee;
            background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);
            background-size: 200% 100%;
            animation: shine 1.5s infinite linear;
            border-radius: 12px;
        }
        .sk-card { height: 120px; margin-bottom: 15px; border-radius: 20px; }
        
        @keyframes shine {
            to { background-position-x: -200%; }
        }

    </style>
</head>
<body>

    <header class="app-header">
        <div class="user-greeting">
            <p>Good Evening,</p>
            <h1>ONCE</h1>
        </div>
        <div class="header-icon">
            <i class="fa-solid fa-bell"></i>
        </div>
    </header>

    <div class="widget-area">
        <div class="main-widget">
            <div class="widget-label">SINCE 2015.10.20</div>
            <div class="counter-box">
                <span class="days-count" id="debut-days">0000</span>
                <span class="days-label">DAYS WITH TWICE</span>
            </div>
        </div>
    </div>

    <div class="tab-menu">
        <div class="tab-item active" onclick="filterNews('all', this)">All</div>
        <div class="tab-item" onclick="filterNews('Official', this)">Official</div>
        <div class="tab-item" onclick="filterNews('News', this)">Media</div>
    </div>

    <div id="news-container">
        <div class="section-title">Latest Updates</div>
        <div id="loading-skeleton">
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card"></div>
        </div>
    </div>

    <div class="mini-player">
        <div class="track-info">
            <div class="album-art">üç≠</div>
            <div class="track-text">
                <h4>STRATEGY (feat. Megan)</h4>
                <p>TWICE ‚Ä¢ The 14th Mini Album</p>
            </div>
        </div>
        <div class="player-controls">
            <i class="fa-solid fa-play"></i>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-btn active" onclick="window.scrollTo({top:0, behavior:'smooth'})">
            <i class="fa-solid fa-house"></i>
            <span class="nav-label">Home</span>
        </div>
        <div class="nav-btn" onclick="location.reload()">
            <i class="fa-solid fa-rotate"></i>
            <span class="nav-label">Refresh</span>
        </div>
        <div class="nav-btn" onclick="window.open('https://www.twicejapan.com/','_blank')">
            <i class="fa-solid fa-globe"></i>
            <span class="nav-label">Official</span>
        </div>
    </nav>

    <script>
        // „Éá„Éì„É•„ÉºÊó•„Ç´„Ç¶„É≥„Çø„ÉºË®àÁÆó
        const debutDate = new Date('2015-10-20');
        const today = new Date();
        const diffTime = Math.abs(today - debutDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        document.getElementById('debut-days').innerText = diffDays;

        // „Éá„Éº„Çø‰øùÊåÅÁî®
        let allNewsData = [];

        // „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø
        fetch('news_data.json')
            .then(response => response.json())
            .then(data => {
                allNewsData = data;
                // Êó•‰ªò„ÇΩ„Éº„Éà
                allNewsData.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // ÂàùÂõûË°®Á§∫
                renderNews(allNewsData);
            })
            .catch(error => {
                document.getElementById('news-container').innerHTML += "<p style='text-align:center; color:#999; margin-top:20px;'>Failed to load news.</p>";
            });

        // „Éã„É•„Éº„ÇπÊèèÁîªÈñ¢Êï∞
        function renderNews(data) {
            const container = document.getElementById('news-container');
            // „Çπ„Ç±„É´„Éà„É≥„ÇíÊ∂à„Åô
            const skeleton = document.getElementById('loading-skeleton');
            if(skeleton) skeleton.style.display = 'none';
            
            // Êó¢Â≠ò„ÅÆË®ò‰∫ã„Çí„ÇØ„É™„Ç¢Ôºà„Çø„Ç§„Éà„É´„ÅØÊÆã„Åô„Åü„ÇÅ„ÄÅ„Çø„Ç§„Éà„É´‰ª•Èôç„ÅÆË¶ÅÁ¥†„ÇíÂÜçÊßãÁØâÔºâ
            // Á∞°ÊòìÁöÑ„Å´„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰∏≠Ë∫´„Çí„É™„Çª„ÉÉ„Éà„Åó„Å¶„Çø„Ç§„Éà„É´„Å†„ÅëË∂≥„Åô
            container.innerHTML = '<div class="section-title">Latest Updates</div>';

            data.forEach(news => {
                // „ÇΩ„Éº„ÇπÂà§ÂÆö
                const isOfficial = news.source === 'Official';
                const sourceClass = isOfficial ? 'source-official' : 'source-news';
                
                const card = document.createElement('a');
                card.className = 'news-card';
                card.href = news.link;
                card.target = "_blank";
                card.style.textDecoration = "none";
                card.style.color = "inherit";

                card.innerHTML = `
                    <div class="card-header">
                        <span class="source-pill ${sourceClass}">
                            ${isOfficial ? '<i class="fa-solid fa-check-circle"></i> OFFICIAL' : '<i class="fa-solid fa-bolt"></i> MEDIA'}
                        </span>
                        <span class="news-date">${news.date.substring(5, 16).replace('-', '/')}</span>
                    </div>
                    <h3 class="news-title">${news.title}</h3>
                    <div style="font-size:0.85rem; color:#666; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;">
                        ${news.summary}
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // „Éï„Ç£„É´„Çø„ÉºÊ©üËÉΩ
        function filterNews(type, element) {
            // „Çø„Éñ„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÂàá„ÇäÊõø„Åà
            document.querySelectorAll('.tab-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');

            // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞
            if (type === 'all') {
                renderNews(allNewsData);
            } else {
                const filtered = allNewsData.filter(news => news.source === type);
                renderNews(filtered);
            }
        }
    </script>
</body>
</html>
